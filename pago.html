<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasarela de Pago | Ecos de la Leyenda</title>
    <link rel="stylesheet" href="pago-style.css">
</head>
<body class="checkout-page">

    <div class="checkout-container">
        <div class="order-summary">
            <h3>üìú Resumen del Tributo</h3>
            <div class="item-detail">
                <p>Edici√≥n Gran H√©roe</p>
                <span>$34.99 MXN</span>
            </div>
            <hr>
            <div class="total">
                <p>Total a pagar:</p>
                <span>$34.99 MXN</span>
            </div>
            <p class="disclaimer">Al confirmar, desbloquear√°s el acceso inmediato a los archivos del reino.</p>
        </div>

        <div class="payment-form-container">
            <h2>C√°mara del Tesoro</h2>
            <p>Introduce los datos de tu pergamino bancario</p>
            
            <form id="payment-gate" onsubmit="procesarTransaccion(event)">
                <div class="input-box">
                    <label>Nombre del Titular</label>
                    <input type="text" id="nombreTitular" placeholder="Ingresa tu nombre completo registrado" required>
                </div>
                
                <div class="input-box">
                    <label>N√∫mero de Tarjeta</label>
                    <input type="text" placeholder="xxxx xxxx xxxx xxxx" maxlength="16" required>
                </div>

                <div class="input-row">
                    <div class="input-box">
                        <label>Vencimiento</label>
                        <input type="text" placeholder="MM/AA" maxlength="5" required>
                    </div>
                    <div class="input-box">
                        <label>CVV</label>
                        <input type="password" placeholder="***" maxlength="3" required>
                    </div>
                </div>

                <button type="submit" class="btn-confirm">CONFIRMAR PAGO</button>
                <button type="button" class="btn-cancel" onclick="location.href='index.html'">ABANDONAR</button>
            </form>

            <div id="processing" class="status-overlay" style="display:none;">
                <div class="spinner"></div>
                <p>Validando tributo con los Antiguos...</p>
            </div>

            <div id="success" class="status-overlay" style="display:none;">
                <div class="success-icon">‚ú®</div>
                <h3>¬°Acceso Concedido!</h3>
                <p>Tu identidad ha sido verificada en el reino.</p>
                <a href="ZELDA_OOT_DEMAKE01.exe" class="btn-download" download>üíæ DESCARGAR JUEGO</a>
            </div>
        </div>
    </div>

    <script>
        function procesarTransaccion(event) {
            event.preventDefault();

            // 1. Obtener el nombre registrado (del formulario de soporte o registro previo)
            // Si no existe, usamos un valor por defecto para que no truene, pero puedes cambiarlo
            const nombreRegistrado = localStorage.getItem('usuarioNombre') || "";
            
            // 2. Obtener el nombre escrito en el formulario de pago
            const nombreEnTarjeta = document.getElementById('nombreTitular').value.trim();

            // 3. Efecto visual de carga
            document.getElementById('payment-gate').style.opacity = '0.1';
            document.getElementById('processing').style.display = 'flex';

            setTimeout(() => {
                document.getElementById('processing').style.display = 'none';

                // 4. L√≥gica de validaci√≥n
                // Comparamos ignorando may√∫sculas/min√∫sculas
                if (nombreEnTarjeta.toLowerCase() === nombreRegistrado.toLowerCase() && nombreRegistrado !== "") {
                    document.getElementById('success').style.display = 'flex';
                    console.log("Validaci√≥n exitosa: El Guerrero coincide.");
                } else {
                    // Si falla, restauramos el formulario y avisamos
                    document.getElementById('payment-gate').style.opacity = '1';
                    alert("‚ùå El nombre no coincide con el Guerrero registrado en el sistema. Intenta de nuevo.");
                    console.log("Error: Nombre incorrecto.");
                }
            }, 2500); // 2.5 segundos de "espera" para darle realismo
        }
    </script>
</body>
</html>